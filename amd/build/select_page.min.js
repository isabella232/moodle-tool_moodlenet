define(["core/ajax","core/templates","tool_moodlenet/selectors","core/notification"],function(a,b,c,d){var e,f=function(a){e=a;var b=document.querySelector(c.region.selectPage);j(b),k(b)},g=function(a){return b.renderPix("courses","tool_moodlenet").then(function(a){return a}).then(function(a){var c=document.createElement("div");return c.innerHTML=a.trim(),b.render("core_course/no-courses",{nocoursesimg:c.firstChild.src})}).then(function(c,d){b.replaceNodeContents(a,c,d),a.classList.add("mx-auto"),a.classList.add("w-25")})},h=function(a,c){return b.render("tool_moodlenet/view-cards",{courses:c}).then(function(c,d){b.replaceNodeContents(a,c,d),a.classList.remove("mx-auto"),a.classList.remove("w-25")})},i=function(b,f,i){var j=f.querySelector(c.region.searchIcon),k=f.querySelector(c.region.clearIcon);""!==b?(j.classList.add("d-none"),k.parentElement.classList.remove("d-none")):(j.classList.remove("d-none"),k.parentElement.classList.add("d-none"));var l={searchvalue:b};a.call([{methodname:"tool_moodlenet_search_courses",args:l}])[0].then(function(a){return 0===a.courses.length?g(i):(a.courses.forEach(function(a){a.viewurl+="&id="+e}),h(i,a.courses))})["catch"](d.exception)},j=function(a){var b=a.querySelector(c.region.searchInput),d=a.querySelector(c.region.courses),e=a.querySelector(c.region.clearIcon);e.addEventListener("click",function(){b.value="",i("",a,d)}),b.addEventListener("input",l(function(){i(b.value,a,d)},300))},k=function(a){var b=a.querySelector(c.region.courses);i("",a,b)},l=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}};return{init:f}});